# .cursorrules

general:

- My app is a B2B2C plataform
- Title: QvaEvents
- Descriprtion:
  I'm building a B2B2C plataform to allow organizers create first an organizer profile and then their business where they can create under those busines the events.
- Structure:
  The plataform will have the next pages:
  `https://qvaevents.com` (public list of events and searchbar to filter events, this page is to clients)
  - Pages for organizers:
    `https://qvaevents.com/ landing`
    `https://qvaevents.com/ auth / org / login`
    `https://qvaevents.com/ auth / org / signup`
    `https://qvaevents.com/ profile`
    `https://qvaevents.com/ new` (create new profile for organizer)
    `https://qvaevents.com / new / [codeId]` (create new business, codeId is the organizer codeId to avoid expose the PK id)
    `https://qvaevents.com/ dashboard / org / [codeId]` (to get all Business and select the one you want manage)
  - Business dashboard relative to an Organizer to manage events:
    `https://qvaevents.com/ dashboard / bus / [codeId]`
    `https://qvaevents.com/ dashboard / bus / [codeId] / new`
    `https://qvaevents.com/ dashboard / bus / [codeId] / events`
    `https://qvaevents.com/ dashboard / bus / [codeId] / clients`
    `https://qvaevents.com/ dashboard / bus / [codeId] / qr-codes`

tech rules for coding:

- description: "Project context (highest priority)"
  content: |

  - This is a Next.js App Router application.
  - The backend is fully powered by Supabase (database, authentication, file storage, queries).
  - The project is written in TypeScript, always using strict typing.
  - Zod is used for validation in server actions.
  - Architecture:
    - Server actions live in `./src/actions`
    - Queries live in `./src/queries`
    - Shared types live in `./src/types`
    - Supabase types are auto-generated in `./src/supabase.ts`
    - App directory structure: `/src/app/[locale]` with routes like `/dashboard` and `/auth`
    - UI components follow ShadCN setup inside `./src/components/ui`
    - Internationalization configs live in `./src/i18n`
    - Static Jsons for translations are in `./messages/en.json` and `./messages/es.json`
    - Providers are in the `./src/providers`
    - Utils that use external libraries are in the `./src/lib`
  - TailwindCSS is used for styling, always following utility-first approach.

- description: "Core coding principles"
  content: |

  - Code must follow SOLID principles and be maintainable.
  - Apply conventions from the _Clean Code_ book:
    - Descriptive and meaningful names
    - Small, single-responsibility functions
    - No duplicate logic
    - Keep complexity low and readability high
  - Favor composition over inheritance.
  - Always ensure consistency between actions, queries, and types.

- description: "Types, actions and queries"
  content: |

  - All queries and actions must use the `State` type (`./src/types/state.d.ts`) for return values:
    ```ts
    export type State = {
      status?: "success" | "error";
      errors?: { [key: string]: string[] };
      data?: Record<string, unknown>;
    };
    ```
  - When working with Supabase tables, always use the generated types:
    ```ts
    import { Tables } from "@/types/supabase";
    export type Plan = Tables<"Plan">;
    ```
  - Queries go inside `./src/queries` and must remain pure, only fetching data.
  - Server actions go inside `./src/actions` and must:
    - Validate input with Zod
    - Handle errors gracefully
    - Return standardized `State` objects
  - Never mix action and query logic in the same file.

- description: "Frontend and UI rules"
  content: |

  - Use ShadCN components from `./src/components/ui` instead of creating custom JS solutions.
  - Apply TailwindCSS utility classes for styling, avoid inline styles.
  - All components must be reusable, accessible (a11y), and responsive.
  - Use React Server Components by default; only use Client Components when state or interactivity is required.

- description: "Internationalization (i18n)"
  content: |

  - All routes are nested under `/src/app/[locale]`.
  - Use the navigation hook defined in `./src/i18n/navigation.ts`:
    ```ts
    export const { Link, redirect, usePathname, useRouter, getPathname } = createNavigation(routing);
    ```
  - You can use internationalization on both the client and server sides.

    ```ts
        "use client"
        import { useTranslations } from "next-intl";
        export const Page = () => {
        const t = useTranslations("EgObject");
          ...
        }
    ```

    ```ts
        import { getTranslations } from "next-intl/server";
        export const Page = () => {
        const t = await getTranslations("EgObject");
          ...
        }
    ```

  - All user-facing text must be localized.

- description: "AI behavior rules"
  content: |

  - Always generate **TypeScript** code, strongly typed.
  - Always validate with **Zod** for server actions.
  - Always return standardized `State` objects for actions/queries.
  - Always use **Supabase types** from `./src/supabase.ts` instead of manually defining database types.
  - Always use **ShadCN UI components** and **TailwindCSS utilities**.
  - Never introduce libraries outside the approved stack without explicit instruction.
  - Prefer minimal, maintainable, and production-ready implementations.
  - Always explain trade-offs if suggesting different approaches.
